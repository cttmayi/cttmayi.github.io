"use strict";(self.webpackChunkmy_github=self.webpackChunkmy_github||[]).push([[21365],{8852:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>s});var r=t(74848),o=t(28453);const i={title:"Tornado\u5e38\u7528\u6280\u5de7\u5206\u4eab",tags:["Tornado","Web"],authors:"cttmayi"},l=void 0,a={permalink:"/en/blog/2019/05/19/Tornado\u5e38\u7528\u6280\u5de7\u5206\u4eab",source:"@site/blog/2019-05-19-Tornado\u5e38\u7528\u6280\u5de7\u5206\u4eab/index.md",title:"Tornado\u5e38\u7528\u6280\u5de7\u5206\u4eab",description:"\u6700\u8fd1\u5f00\u53d1\u4e86\u4e00\u4e0btornado\u7684\u4ee3\u7801, \u548cdjango\u5bf9\u6bd4, \u53d1\u73b0\u5b83\u7b80\u6d01, \u6ca1\u6709\u5e2e\u5f00\u53d1\u8005\u505a\u5927\u91cf\u7684\u4e8b\u60c5, \u53cd\u800c\u8ba4\u4e3a\u903b\u8f91\u66f4\u6e05\u6670, \u66f4\u8ba9\u6211\u5bb9\u6613\u4e0a\u624b. \u4e0b\u9762\u662f\u5f00\u53d1\u8fc7\u7a0b\u4e2d, \u9047\u5230\u4e86\u4e00\u4e9b\u72b6\u51b5\u4ee5\u53ca\u89e3\u51b3\u529e\u6cd5.",date:"2019-05-19T00:00:00.000Z",formattedDate:"May 19, 2019",tags:[{label:"Tornado",permalink:"/en/blog/tags/tornado"},{label:"Web",permalink:"/en/blog/tags/web"}],readingTime:1.49,hasTruncateMarker:!1,authors:[{name:"Ling Yuan",title:"Engineer",url:"https://github.com/cttmayi",imageURL:"https://github.com/cttmayi.png",key:"cttmayi"}],frontMatter:{title:"Tornado\u5e38\u7528\u6280\u5de7\u5206\u4eab",tags:["Tornado","Web"],authors:"cttmayi"},unlisted:!1,prevItem:{title:"\u6df1\u5733\u5f52\u6765, \u8bfb\u5b8c\u534a\u672c<\u6001\u5ea6>",permalink:"/en/blog/2019/05/27/\u6df1\u5733\u5f52\u6765\u8bfb\u5b8c\u534a\u672c\u6001\u5ea6"},nextItem:{title:"\u57ce\u5e02\u8ba1\u7b97AI\u6311\u6218\u8d5b - \u63d0\u4ea4\u7ed3\u679c",permalink:"/en/blog/2019/05/18/\u57ce\u5e02\u8ba1\u7b97AI\u6311\u6218\u8d5b\u63d0\u4ea4\u7ed3\u679c"}},d={authorsImageUrls:[void 0]},s=[{value:"\u5f00\u59cb\u5165\u95e8",id:"\u5f00\u59cb\u5165\u95e8",level:2},{value:"\u9759\u6001\u8d44\u6e90",id:"\u9759\u6001\u8d44\u6e90",level:2},{value:"\u6a21\u677f(template)",id:"\u6a21\u677ftemplate",level:2},{value:"Debug\u76f8\u5173",id:"debug\u76f8\u5173",level:2},{value:"debug=True",id:"debugtrue",level:3},{value:"log_file_prefix",id:"log_file_prefix",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\u6700\u8fd1\u5f00\u53d1\u4e86\u4e00\u4e0btornado\u7684\u4ee3\u7801, \u548cdjango\u5bf9\u6bd4, \u53d1\u73b0\u5b83\u7b80\u6d01, \u6ca1\u6709\u5e2e\u5f00\u53d1\u8005\u505a\u5927\u91cf\u7684\u4e8b\u60c5, \u53cd\u800c\u8ba4\u4e3a\u903b\u8f91\u66f4\u6e05\u6670, \u66f4\u8ba9\u6211\u5bb9\u6613\u4e0a\u624b. \u4e0b\u9762\u662f\u5f00\u53d1\u8fc7\u7a0b\u4e2d, \u9047\u5230\u4e86\u4e00\u4e9b\u72b6\u51b5\u4ee5\u53ca\u89e3\u51b3\u529e\u6cd5."}),"\n",(0,r.jsx)(n.h2,{id:"\u5f00\u59cb\u5165\u95e8",children:"\u5f00\u59cb\u5165\u95e8"}),"\n",(0,r.jsx)(n.p,{children:"\u4e00\u4e2a\u5165\u95e8\u7684\u7b80\u5355\u8303\u4f8b, \u4ece\u4ed6\u5f00\u59cb"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'import tornado\nfrom tornado.options import define, options\ndefine("port", default=8000, help="run on the given port", type=int)\n\nclass IndexHandler(tornado.web.RequestHandler):\n    def get(self):\n        greeting = self.get_argument(\'greeting\', \'Hello\')\n        self.write(greeting + \', friendly user!\')\n\nif __name__ == "__main__":\n    tornado.options.parse_command_line()\n    app = tornado.web.Application(handlers=[(r"/", IndexHandler)])\n    http_server = tornado.httpserver.HTTPServer(app)\n    http_server.listen(options.port)\n    tornado.ioloop.IOLoop.instance().start()\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u9759\u6001\u8d44\u6e90",children:"\u9759\u6001\u8d44\u6e90"}),"\n",(0,r.jsx)(n.p,{children:"\u6dfb\u52a0static_path\u540e, \u5373\u53ef\u5728\u5f53\u524d\u76ee\u5f55\u6dfb\u52a0static\u76ee\u5f55, \u653e\u5165\u9759\u6001\u8d44\u6e90, \u6bd4\u5982(\u5c06bootstrap\u653e\u5165static\u4e2d)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'import tornado\napp = tornado.web.Application(\n    handlers=[\n        (r"/", IndexHandler),\n    ],\n    static_path=os.path.join(os.path.dirname(__file__), "static"),\n)\n'})}),"\n",(0,r.jsx)(n.p,{children:"HTML\u5f15\u7528\u65b9\u5f0f\u5982\u4e0b,"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'<head>\n    <link  rel="stylesheet"  type="text/css"  href="/static/bootstrap/css/bootstrap.min.css">\n    <script type="text/javascript"  src="/static/bootstrap/js/bootstrap.min.js"><\/script>\n</head>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u6a21\u677ftemplate",children:"\u6a21\u677f(template)"}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7template_path\u53c2\u6570\u5b9a\u4e49\u6a21\u677f\u7684\u4f4d\u7f6e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'import tornado\napp = tornado.web.Application(\n    handlers=[\n        (r"/", IndexHandler),\n    ],\n    template_path=os.path.join(os.path.dirname(__file__), "templates"),\n)\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5229\u7528render\u51fd\u6570\u8fdb\u884c\u6e32\u67d3."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"class ArticleHandler(tornado.web.RequestHandler):\n    def get(self, id):\n        ret = db.get('article', id)\n        title = ret['title']\n        content = ret['content']\n        self.render('article.html', title=title, content=content)\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u53c2\u6570\u7684\u4f5c\u7528\u662f\u66ff\u6362\u6a21\u677f\u4e2d\u7684\u53d8\u91cf, \u67092\u79cd\u60c5\u51b5"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"{{ ... }}: \u6709\u5b57\u7b26\u8f6c\u4e49\u529f\u80fd"}),"\n",(0,r.jsx)(n.li,{children:"{% raw ... %}: \u6ca1\u6709\u5b57\u7b26\u8f6c\u4e49\u529f\u80fd. \u4f8b\u5982\u6211\u4eec\u9700\u8981\u76f4\u63a5\u653e\u5165html\u6807\u7b7e\u7684\u65f6\u5019, \u5c31\u9700\u8981\u5b83"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'    <body>\n        <h1>{{ title }}</h1>\n        <div class="col-sm-2">\n        </div>\n        <div class="col-sm-8">\n            <div class="col-xs-6 col-sm-2">\n            </div>\n            <div class="col-xs-6 col-sm-10">\n                {% raw content %}\n            </div>\n        </div>\n    </body>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"debug\u76f8\u5173",children:"Debug\u76f8\u5173"}),"\n",(0,r.jsx)(n.h3,{id:"debugtrue",children:"debug=True"}),"\n",(0,r.jsx)(n.p,{children:"\u52a0\u5165debug=True, \u4e3b\u8981\u770b\u52302\u4e2a\u529f\u80fd,"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8f93\u51fa\u9519\u8bef\u5230\u7f51\u9875, \u65b9\u4fbf\u67e5\u770b\u9519\u8bef\u4fe1\u606f"}),"\n",(0,r.jsx)(n.li,{children:"auto reload \u529f\u80fd\u6253\u5f00, \u5728\u4f60\u4fee\u6539Debug"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'import tornado\n\napp = tornado.web.Application(\n    handlers=[\n        (r"/", IndexHandler),\n    ],\n    debug=True\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"log_file_prefix",children:"log_file_prefix"}),"\n",(0,r.jsx)(n.p,{children:"\u8bbe\u5b9a\u9ed8\u8ba4\u53c2\u6570(\u9700\u8981\u5728parse_command_line\u4e4b\u524d), \u6216\u8005\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u8f93\u5165\u53c2\u6570."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'    tornado.options.define("log_file_prefix", default="/tmp/tornado.log")\n    tornado.options.parse_command_line()\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u53e6\u5916, \u5982\u4e0b\u8fd9\u7bc7\u4e2d\u6587\u6587\u6863\u4e0d\u9519, \u57fa\u672c\u53ef\u89e3\u51b3\u5165\u95e8\u95ee\u9898.\n",(0,r.jsx)(n.a,{href:"http://demo.pythoner.com/itt2zh/index.html",children:"http://demo.pythoner.com/itt2zh/index.html"})]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var r=t(96540);const o={},i=r.createContext(o);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);