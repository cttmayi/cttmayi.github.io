"use strict";(self.webpackChunkmy_github=self.webpackChunkmy_github||[]).push([[99890],{28511:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var c=t(74848),r=t(28453);const a={title:"OpenCV3 - \u8f6e\u5ed3\u7279\u5f81",tags:["OpenCV","\u7ffb\u8bd1"],authors:"cttmayi"},s=void 0,i={permalink:"/en/blog/2019/04/02/OpenCV3\u8f6e\u5ed3\u7279\u5f81",source:"@site/blog/2019-04-02-OpenCV3\u8f6e\u5ed3\u7279\u5f81/index.md",title:"OpenCV3 - \u8f6e\u5ed3\u7279\u5f81",description:"\u77e9(Moments)",date:"2019-04-02T00:00:00.000Z",formattedDate:"April 2, 2019",tags:[{label:"OpenCV",permalink:"/en/blog/tags/open-cv"},{label:"\u7ffb\u8bd1",permalink:"/en/blog/tags/\u7ffb\u8bd1"}],readingTime:1.38,hasTruncateMarker:!1,authors:[{name:"Ling Yuan",title:"Engineer",url:"https://github.com/cttmayi",imageURL:"https://github.com/cttmayi.png",key:"cttmayi"}],frontMatter:{title:"OpenCV3 - \u8f6e\u5ed3\u7279\u5f81",tags:["OpenCV","\u7ffb\u8bd1"],authors:"cttmayi"},unlisted:!1,prevItem:{title:"OpenCV3 - \u8f6e\u5ed3\u5165\u95e8",permalink:"/en/blog/2019/04/02/OpenCV3\u8f6e\u5ed3\u5165\u95e8"},nextItem:{title:"\u65e0\u76ee\u6807, \u4e0d\u6f14\u8bb2",permalink:"/en/blog/2019/03/28/\u65e0\u76ee\u6807\u4e0d\u6f14\u8bb2"}},o={authorsImageUrls:[void 0]},l=[{value:"\u77e9(Moments)",id:"\u77e9moments",level:2},{value:"\u8f6e\u5ed3\u9762\u79ef",id:"\u8f6e\u5ed3\u9762\u79ef",level:2},{value:"\u8f6e\u5ed3\u5468\u957f",id:"\u8f6e\u5ed3\u5468\u957f",level:2},{value:"\u8f6e\u5ed3\u903c\u8fd1",id:"\u8f6e\u5ed3\u903c\u8fd1",level:2},{value:"\u8fb9\u6846",id:"\u8fb9\u6846",level:2},{value:"\u76f4\u8fb9\u754c\u77e9\u5f62",id:"\u76f4\u8fb9\u754c\u77e9\u5f62",level:3},{value:"\u65cb\u8f6c\u77e9\u5f62",id:"\u65cb\u8f6c\u77e9\u5f62",level:3},{value:"\u53c2\u8003\u6587\u4ef6",id:"\u53c2\u8003\u6587\u4ef6",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"\u77e9moments",children:"\u77e9(Moments)"}),"\n",(0,c.jsxs)(n.p,{children:["\u56fe\u50cf\u77e9\u53ef\u4ee5\u5e2e\u52a9\u4f60\u8ba1\u7b97\u4e00\u4e9b\u7279\u5f81, \u4f8b\u5982\u5bf9\u8c61\u7684\u8d28\u5fc3, \u5bf9\u8c61\u7684\u9762\u79ef\u7b49\u7b49. \u5177\u4f53\u53ef\u53c2\u8003",(0,c.jsx)(n.a,{href:"http://en.wikipedia.org/wiki/Image_moment",children:"Image Moments"})]}),"\n",(0,c.jsxs)(n.p,{children:["\u51fd\u6570**",(0,c.jsx)(n.a,{href:"https://docs.opencv.org/3.4.0/d3/dc0/group__imgproc__shape.html##ga556a180f43cab22649c23ada36a8a139",children:"cv.moments()"}),"** \u8fd4\u56de\u4e00\u4e2a\u6240\u6709\u77e9\u503c\u7684\u5b57\u5178"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"import numpy as np\nimport cv2 as cv\nimg = cv.imread('star.jpg',0)\nret,thresh = cv.threshold(img,127,255,0)\nim2,contours,hierarchy = cv.findContours(thresh, 1, 2)\ncnt = contours[0]\nM = cv.moments(cnt)\nprint( M )\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u901a\u8fc7\u8fd9\u4e9b\u77e9\u503c, \u4f60\u53ef\u4ee5\u8ba1\u7b97\u51fa\u6709\u7528\u7684\u6570\u636e, \u4f8b\u5982\u9762\u79ef, \u8d28\u5fc3\u7b49\u7b49. \u8d28\u5fc3\u53ef\u4ee5\u901a\u8fc7\u5173\u7cfb(Cx=M10/M00 and Cy=M01/M00)\u6765\u83b7\u5f97.  \u901a\u8fc7\u5982\u4e0b\u8ba1\u7b97\u83b7\u5f97"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"cx = int(M['m10']/M['m00'])\ncy = int(M['m01']/M['m00'])\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u8f6e\u5ed3\u9762\u79ef",children:"\u8f6e\u5ed3\u9762\u79ef"}),"\n",(0,c.jsxs)(n.p,{children:["\u8f6e\u5ed3\u9762\u79ef\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570**",(0,c.jsx)(n.a,{href:"https://docs.opencv.org/3.4.0/d3/dc0/group__imgproc__shape.html##ga2c759ed9f497d4a618048a2f56dc97f1",children:"cv.contourArea()"}),"**\u83b7\u5f97, \u6216\u8005\u901a\u8fc7M['m00']"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"area = cv.contourArea(cnt)\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u8f6e\u5ed3\u5468\u957f",children:"\u8f6e\u5ed3\u5468\u957f"}),"\n",(0,c.jsxs)(n.p,{children:["\u8f6e\u5ed3\u5468\u957f\u53ef\u4ee5\u4f7f\u7528**",(0,c.jsx)(n.a,{href:"https://docs.opencv.org/3.4.0/d3/dc0/group__imgproc__shape.html##ga8d26483c636be6b35c3ec6335798a47c",children:"cv.arcLength()"}),"** \u83b7\u5f97. \u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a\u56fe\u5f62\u662f\u5426\u95ed\u73af(\u5982\u679c\u662f\u5219\u4e3aTrue), \u5426\u5219\u53ea\u662f\u4e00\u6761\u66f2\u7ebf."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"perimeter = cv.arcLength(cnt,True)\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u8f6e\u5ed3\u903c\u8fd1",children:"\u8f6e\u5ed3\u903c\u8fd1"}),"\n",(0,c.jsxs)(n.p,{children:["\u5b83\u903c\u8fd1\u4e00\u4e2a\u8f6e\u5ed3\u5f62\u72b6\u5230\u53e6\u4e00\u4e2a\u9876\u70b9\u6570\u76ee\u8f83\u5c11\u7684\u5f62\u72b6, \u8fd9\u53d6\u51b3\u4e8e\u6211\u4eec\u6307\u5b9a\u7684\u7cbe\u5ea6. \u5b83\u662f",(0,c.jsx)(n.a,{href:"http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm",children:"Douglas-Peucker algorithm"}),"\u7b97\u6cd5\u7684\u4e00\u79cd\u5b9e\u73b0."]}),"\n",(0,c.jsxs)(n.p,{children:["\u51fd\u6570",(0,c.jsx)(n.a,{href:"https://docs.opencv.org/3.4.0/d3/dc0/group__imgproc__shape.html##ga0012a5fdaea70b8a9970165d98722b4c",children:"cv.approxPolyDP"})]}),"\n",(0,c.jsx)(n.p,{children:"\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8f6e\u5ed3"}),"\n",(0,c.jsx)(n.p,{children:"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u79f0\u4e3a\u03b5, \u5b83\u662f\u4ece\u8f6e\u5ed3\u5230\u8fd1\u4f3c\u8f6e\u5ed3\u7684\u6700\u5927\u8ddd\u79bb. \u8fd9\u662f\u4e00\u4e2a\u51c6\u786e\u7684\u53c2\u6570\u3002\u4e3a\u4e86\u5f97\u5230\u6b63\u786e\u7684\u8f93\u51fa, \u9700\u8981\u660e\u667a\u5730\u9009\u62e9\u03b5\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"epsilon = 0.1*cv.arcLength(cnt,True)\napprox = cv.approxPolyDP(cnt,epsilon,True)\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u5982\u4e0b\u7684\u7b2c\u4e8c\u5f20\u56fe\u662f\u03b5\u8bbe\u5b9a\u4e3a10%\u7684\u7ed3\u679c, \u7b2c\u4e09\u5f20\u56fe\u662f\u03b5\u8bbe\u5b9a\u4e3a1%\u7684\u7ed3\u679c."}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:"https://static.oschina.net/uploads/img/201712/31072834_aPAe.jpg",alt:"approx.jpg"})}),"\n",(0,c.jsx)(n.h2,{id:"\u8fb9\u6846",children:"\u8fb9\u6846"}),"\n",(0,c.jsx)(n.h3,{id:"\u76f4\u8fb9\u754c\u77e9\u5f62",children:"\u76f4\u8fb9\u754c\u77e9\u5f62"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"x,y,w,h = cv.boundingRect(cnt)\ncv.rectangle(img,(x,y),(x+w,y+h),(0,255,0),2)\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\u65cb\u8f6c\u77e9\u5f62",children:"\u65cb\u8f6c\u77e9\u5f62"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"rect = cv.minAreaRect(cnt)\nbox = cv.boxPoints(rect)\nbox = np.int0(box)\ncv.drawContours(img,[box],0,(0,0,255),2)\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u7eff\u6846\u662f\u76f4\u8fb9\u754c\u77e9\u5f62, \u7ea2\u6846\u662f\u65cb\u8f6c\u77e9\u5f62"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:"https://static.oschina.net/uploads/img/201712/31072836_Hewu.png",alt:"boundingrect.png"})}),"\n",(0,c.jsx)(n.h2,{id:"\u53c2\u8003\u6587\u4ef6",children:"\u53c2\u8003\u6587\u4ef6"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://docs.opencv.org/3.4.0/dd/d49/tutorial_py_contour_features.html",children:"Contour Features"})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var c=t(96540);const r={},a=c.createContext(r);function s(e){const n=c.useContext(a);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),c.createElement(a.Provider,{value:n},e.children)}}}]);