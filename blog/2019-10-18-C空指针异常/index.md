---
title: C++ 空指针异常
tags: [C++, 技术]
authors: cttmayi
---

昨天, 同仁遇到一题空指针问题,  我发现同仁对C++基础不甚了解, 或者是被Java给带偏了.

**C++ 代码示意**
```
class Cls {
    int c;
    int add(a,b)
}

Cls :: func(a,b) {
    return a+b+this.c
}

```

**异常发生点**
在func中报告空指针异常, this指针为空
那么在什么情况下, this会为空呢?


**错误的猜测**
同仁猜测是由于对象被析构了, 导致this为空

**正确答案**
如下代码, cls的值为空指针.
```
cls->func(a,b)
```
同仁反驳, 如果cls为空, 问题点一定是发生在函数调用的地方, 及空指针报在cls的地方.

**说明**
函数调用是不需要依赖于对象指针的(纯虚函数除外), cls的值是作为函数的第一个参数被传入, 及this值. 为什么之前有提到Java的误导, 因为Java的所有函数都是纯虚函数. 纯虚函数的调用会依赖于cls的值, 如果cls为空, 就会在函数调用是报空指针异常.
